<!doctype html>
<html lang="it" data-css="css/style.css, css/cookie.css">
<head>
  <!-- BASE dinamico + CSS loader -->
  <script>
  (function () {
    // Calcola <base> adattivo:
    //  - /<repo>/(html|pages)/... -> "/<repo>/"
    //  - /(html|pages)/...        -> "/"
    //  - altrimenti               -> "/"
    var path = location.pathname;
    var m = path.match(/^\/([^\/]+)\/(?:html|pages)\//);
    var baseHref = m ? ("/" + m[1] + "/") : "/";

    var base = document.createElement("base");
    base.href = baseHref;
    document.head.prepend(base);

    // Carica 1+ CSS dichiarati su <html data-css="...">
    var list = (document.documentElement.getAttribute("data-css") || "css/style.css")
      .split(",").map(s => s.trim()).filter(Boolean);

    var seen = new Set();
    list.forEach(href => {
      if (seen.has(href)) return;
      seen.add(href);
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.href = href;
      document.head.appendChild(link);
    });
  })();
  </script>

  <meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Cookie Policy — Mart Tattoo</title>
  <meta name="description" content="Informativa sui cookie usati dal sito e gestione preferenze.">

  <noscript>
    <!-- Fallback (senza JS) — percorsi relativi a /pages/ -->
    <link rel="stylesheet" href="../css/style.css"/>
    <link rel="stylesheet" href="../css/cookie.css"/>
  </noscript>
</head>
<script src="../js/bg.js"></script>
<body>
    <div id="bgTriangles" class="bg-triangles"></div>
  <!-- Header -->
  <header class="site-header">
    <div class="container nav">
      <a class="brand" href="html/index.html#top" aria-label="Home">
        <img src="media/logo/BC357403-6BB9-48BB-B630-43656FD16E49-2.png" alt="Logo Emanuele Amendolaggine" class="brand__logo" />
        <span class="brand__name">Mart Tattoo</span>
      </a>

      <nav class="nav__links" aria-label="Navigazione principale">
        <a href="html/index.html#portfolio" class="nav__link">Portfolio</a>
        <a href="html/index.html#studio" class="nav__link">Studio</a>
        <a href="html/index.html#booking" class="btn btn--primary">Prenota</a>
      </nav>

      <button class="nav__burger" aria-label="Apri menù" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
    </div>

    <div class="mobile-menu" hidden>
      <a href="html/index.html#portfolio" class="nav__link">Portfolio</a>
      <a href="html/index.html#studio" class="nav__link">Studio</a>
      <a href="html/index.html#booking" class="btn btn--primary w-full">Prenota</a>
    </div>
  </header>

  <main id="top">
    <!-- HERO -->
    <section class="hero hero--compact container">
      <h1 class="hero__title">Cookie Policy</h1>
      <p class="hero__tag">Uso essenziale dei cookie. Nessuna profilazione. Statistiche non presenti.</p>
      <div class="hero__cta">
        <a class="btn btn--primary" href="pages/gestisci-dati.html">Gestisci preferenze</a>
      </div>
    </section>

    <!-- CONTENUTO -->
    <section class="section container">
      <div class="cookie-grid">
        <article class="card card--pad" id="cosa-sono">
          <h3>Cosa sono i cookie</h3>
          <p>Piccoli file di testo che un sito salva sul tuo dispositivo. Servono a ricordare preferenze o mantenere funzioni base di navigazione.</p>
        </article>

        <article class="card card--pad" id="cosa-usiamo">
          <h3>Cosa usiamo su Mart Tattoo</h3>
          <ul class="bullets">
            <li><b>Cookie tecnici</b>: necessari, es. <code>ck_consent</code> per ricordare la preferenza sui cookie.</li>
            <li><b>Nessun cookie statistico/marketing</b>: non facciamo profilazione, non usiamo analytics di terze parti.</li>
          </ul>
        </article>

        <article class="card card--pad" id="localstorage">
          <h3>LocalStorage (non è un cookie)</h3>
          <p>Usiamo LocalStorage per funzioni di interfaccia. Esempi:</p>
          <ul class="bullets">
            <li><code>mart_booking_counts</code>: contatore <i>locale</i> di disponibilità (fallback, quando il server non risponde).</li>
            <li>Piccole preferenze UI (es. stato lightbox). </li>
          </ul>
          <p class="tiny">LocalStorage resta sul tuo browser finché non lo svuoti; non viene inviato automaticamente ai server.</p>
        </article>

        <article class="card card--pad" id="gestione">
          <h3>Gestione preferenze</h3>
          <p>Puoi modificare la scelta in qualsiasi momento:</p>
          <p>
            <a class="btn btn--ghost" href="pages/gestisci-dati.html" id="cookiePrefsFooter">
              Apri preferenze cookie
            </a>
          </p>
          <p class="tiny">Puoi anche intervenire dalle impostazioni del tuo browser (eliminazione cronologia/dati, blocco selettivo dei cookie).</p>
        </article>

        <article class="card card--pad" id="terze-parti">
          <h3>Servizi di terze parti</h3>
          <p>Il sito dialoga con un backend (Supabase) per salvare le richieste di prenotazione. Con la nostra configurazione <code>persistSession:false</code>, non vengono impostati cookie di autenticazione sul client.</p>
        </article>
      </div>
    </section>

    <!-- ELENCO COOKIE -->
    <section class="section container" id="elenco">
      <div class="section__head">
        <h2 class="section__title">Elenco cookie</h2>
        <p class="section__sub">Solo cookie tecnici essenziali.</p>
      </div>

      <div class="card card--pad">
        <div class="cookie-table">
          <div class="row head">
            <div>Nome</div><div>Finalità</div><div>Durata</div><div>Provider</div>
          </div>
          <div class="row">
            <div>ck_consent</div>
            <div>Memorizza la tua preferenza sui cookie</div>
            <div>6 mesi</div>
            <div>marttattoo.it</div>
          </div>
        </div>
        <p class="tiny" style="margin-top:10px">Non vengono impostati cookie di statistica o marketing.</p>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container grid--footer">
      <nav aria-label="Link utili">
        <h4>Studio</h4>
        <ul>
          <li><a href="html/index.html#portfolio">Portfolio</a></li>
          <li><a href="html/index.html#studio">Dove siamo</a></li>
          <li><a href="html/index.html#booking">Prenota</a></li>
          <li><a href="pages/come-funziona.html">Come funziona la prenotazione</a></li>
          <li><a href="pages/faq.html">FAQ</a></li>
          <li><a href="pages/aftercare.html">Aftercare</a></li>
        </ul>
      </nav>

      <nav aria-label="Legale">
        <h4>Info & Policy</h4>
        <ul>
          <li><a href="pages/policy-prenotazioni.html">Policy prenotazioni</a></li>
          <li><a href="pages/privacy.html">Privacy</a></li>
          <li><a href="pages/cookie.html" aria-current="page">Cookie</a></li>
          <li><a href="pages/gestisci-dati.html">Gestisci Cookie</a></li>
          <li><a href="pages/termini.html">Termini e condizioni</a></li>
          <li><a href="pages/accessibilita.html">Accessibilità</a></li>
        </ul>
      </nav>

      <div class="contacts" aria-label="Contatti">
        <h4>Contatti</h4>
        <p><a href="tel:+393347363499">+39 334 736 3499</a></p>
        <p><a href="mailto:emanueleamendolagine@gmail.com">emanueleamendolagine@gmail.com</a></p>
        <p>Via Raffaele Comes 19, 70032 Bitonto (BA)</p>
        <p>Partita IVA: 01234567890</p>
        <p><a href="https://www.instagram.com/marttattooo/" target="_blank" rel="noopener">Instagram</a></p>
      </div>
    </div>

    <div class="container copy tiny">
      © <span id="year"></span> Emanuele Amendolaggine — Mart Tattoo — Realizzato da Davide D'Angelo
    </div>
  </footer>

  <!-- JS generale -->
  <script type="module" src="js/app.js?v=2"></script>
  <script>
    // Data aggiornamento (opzionale: se inserisci un <span id="ckDate">—</span>)
    document.getElementById('ckDate')?.replaceChildren(
      new Date().toLocaleDateString('it-IT', { day:'2-digit', month:'2-digit', year:'numeric' })
    );

    // Apri pannello preferenze: emetti evento globale (se lo gestisci nel tuo JS)
    const openPrefs = () => {
      window.dispatchEvent(new CustomEvent('open-cookie-preferences'));
      console.info('[cookie] open-cookie-preferences');
    };
    document.getElementById('cookiePrefs')?.addEventListener('click', openPrefs);
    document.getElementById('cookiePrefs2')?.addEventListener('click', openPrefs);
    document.getElementById('cookiePrefsFooter')?.addEventListener('click', openPrefs);
  </script>
</body>
</html>
